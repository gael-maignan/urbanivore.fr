
<script type="module">
async function urlToFile(url, filename) {
  const res = await fetch(url);
  const blob = await res.blob();
  return new File([blob], filename, { type: blob.type });
}

async function identify() {
  //const image1 = await urlToFile('https://urbanivore.fr/collaborate/image_1.jpeg', 'img1.jpeg');
  const image2 = await urlToFile('https://urbanivore.fr/collaborate/image_2.jpeg', 'img2.jpeg');

  const form = new FormData();
  //form.append('organs', 'flower');
  //form.append('images', image1);
  form.append('organs', 'leaf');
  form.append('images', image2);

  const response = await fetch(
    `https://my-api.plantnet.org/v2/identify/all?api-key=2b10Is89LUbOJaKfi7OCou6jsO`,
    {
      method: 'POST',
      body: form,
    }
  );

  console.log(await response.json());
}
identify();

</script>
